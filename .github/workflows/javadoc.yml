name: Publish Javadocs

on:
  push:
    branches:
      - main   # Trigger on pushes to main (change if needed)

permissions:
  contents: write   # Required to push to another branch

jobs:
  build-and-publish:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        fetch-depth: 0   # Needed to push later

    - name: Set up JDK
      uses: actions/setup-java@v4
      with:
        distribution: temurin
        java-version: 17   # or your version

    - name: Generate Javadocs
      run: |
        mkdir -p javadoc
        javadoc -d javadoc *.java
        
    - name: Deploy to javadoc branch
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_branch: javadoc
        publish_dir: javadoc
